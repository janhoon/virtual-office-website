---
---

<section id="waitlist" class="section">
  <div class="shell">
    <div class="waitlist-card reveal">
      <p class="eyebrow">Pilot Program</p>
      <h2>Join the early access list for enterprise remote communication teams.</h2>
      <p>
        We are onboarding a limited number of companies to validate real-world workflows, channel structures, and voice collaboration patterns. Leave your work email to get priority access.
      </p>

      <form class="waitlist-form" data-waitlist-form>
        <input
          type="email"
          name="email"
          placeholder="Work email"
          required
          autocomplete="email"
          class="waitlist-input"
          data-waitlist-email
        />
        <button
          type="submit"
          class="button button-primary"
        >
          Join Waitlist
        </button>
      </form>
      <p class="waitlist-footnote">No spam. We only send product updates and pilot invites.</p>
      <p class="waitlist-message" aria-live="polite" data-waitlist-message></p>
    </div>
  </div>
</section>

<script>
  const forms = document.querySelectorAll('[data-waitlist-form]');

  forms.forEach((element) => {
    if (!(element instanceof HTMLFormElement)) {
      return;
    }

    const form = element;
    const emailInput = form.querySelector('[data-waitlist-email]') as HTMLInputElement | null;
    const message = form.parentElement?.querySelector('[data-waitlist-message]') as HTMLParagraphElement | null;

    if (!emailInput || !message) {
      return;
    }

    form.addEventListener('submit', async (e) => {
      e.preventDefault();

      const email = emailInput.value.trim();
      message.textContent = 'Submitting...';
      message.className = 'waitlist-message waitlist-message-pending';

      try {
        const response = await fetch('/api/waitlist', {
          method: 'POST',
          headers: {
            'Content-Type': 'application/json',
          },
          body: JSON.stringify({ email }),
        });

        const data = await response.json();

        if (response.ok) {
          message.textContent = "Thanks. You're on the early access list.";
          message.className = 'waitlist-message waitlist-message-success';
          emailInput.value = '';
        } else {
          message.textContent = data.error || 'Something went wrong. Please try again.';
          message.className = 'waitlist-message waitlist-message-error';
        }
      } catch (error) {
        message.textContent = 'Network error. Please try again.';
        message.className = 'waitlist-message waitlist-message-error';
      }
    });
  });
</script>
